<!DOCTYPE html>
<html lang="">  <!-- I was getting a warning when there was no lang="" here, so I added it. (Nick) -->
<head>
    <meta charset="utf-8">
    <title>Guy with Scythe</title>

    <script type="text/javascript" src="./assetmanager.js"></script>
    <script type="text/javascript" src="./timer.js"></script>
    <script type="text/javascript" src="./gameengine.js"></script>
    <script type="text/javascript" src="./util.js"></script>
    <script type="text/javascript" src="./main.js"></script>
    <script type="text/javascript" src="./entity.js"></script>
    <script type="text/javascript" src="./camera.js"></script>
    <script type="text/javascript" src="./boundingBox.js"></script>
    <script type="text/javascript" src="./attackCirc.js"></script>
    <script type="text/javascript" src="./portal.js"></script>
    <script type="text/javascript" src="./enemy_contact.js"></script>
    <script type="text/javascript" src="./exp_orb.js"></script>
    <script type="text/javascript" src="./weapon.js"></script>
    <script type="text/javascript" src="./scythe.js"></script>
    <script type="text/javascript" src="./bow.js"></script>
    <script type="text/javascript" src="./projectile.js"></script>
    <script type="text/javascript" src="./animator.js"></script>
    <script type="text/javascript" src="./map_object.js"></script>
    <script type="text/javascript" src="./dude.js"></script>

    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: black;
            color: white; /* Set text color to white */
        }

        #gameWorld {
            cursor: none;
        }

        #debugModeSection {
            margin-top: 10px;
            text-align: center;
        }

        #debugModeSection, #debugInfo {
            color: white; /* Ensure the debug text is white */
        }
    </style>
</head>
<body>
    <!-- Setting the rendering to pixelated allows us to have a non-blurry fullscreen. -->
    <canvas id="gameWorld" width="1440" height="810" style="background: white; border: 1px solid black; image-rendering: pixelated;" tabindex="0"></canvas>

    <!-- Fullscreen button -->
    <button id="fullscreenButton">Fullscreen</button>

    <!-- Debug Mode Section -->
    <div id="debugModeSection">
        <label for="debugModeCheckbox"><strong>Debug Mode</strong></label>
        <input type="checkbox" id="debugModeCheckbox">
        <div id="debugInfo" style="display: none;">
            <p>Player Position: <span id="playerPosition">0x, 0y</span></p>
        </div>
    </div>

    <!-- Script to fullscreen the game. -->
    <script>
        const canvas = document.getElementById('gameWorld');
        const fullscreenButton = document.getElementById('fullscreenButton');

        // Function to toggle fullscreen mode
        const toggleFullscreen = () => {
            if (document.fullscreenElement) {
                // If already in fullscreen, exit fullscreen
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            } else {
                // If not in fullscreen, request fullscreen
                if (canvas.requestFullscreen) {
                    canvas.requestFullscreen();
                }
            }
        };

        // Add click event listener to the fullscreen button
        fullscreenButton.addEventListener('click', toggleFullscreen);
    </script>

    <!-- Script for debug mode. -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const debugCheckbox = document.getElementById('debugModeCheckbox');
            const debugInfo = document.getElementById('debugInfo');
            const playerPosition = document.getElementById('playerPosition');

            debugCheckbox.addEventListener('change', function() {
                if (debugCheckbox.checked) {
                    debugInfo.style.display = 'block';
                    gameEngine.debugMode = true; // Enable debug mode in the game engine
                    setInterval(() => {
                        if (gameEngine.player) {
                            playerPosition.textContent = `${gameEngine.player.worldX}x, ${gameEngine.player.worldY}y`;
                        }
                    }, 100); // Update every 100 milliseconds
                } else {
                    debugInfo.style.display = 'none';
                    gameEngine.debugMode = false; // Disable debug mode in the game engine
                }
            });

            // Set focus to the canvas when the page loads
            canvas.focus();

            // Prevent the canvas from losing focus
            canvas.addEventListener('blur', () => {
                canvas.focus();
            });
        });
    </script>
</body>
</html>
